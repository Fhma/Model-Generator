<?xml version="1.0" encoding="ISO-8859-1"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:atl="http://www.eclipse.org/gmt/2005/ATL" xmlns:ocl="http://www.eclipse.org/gmt/2005/OCL">
  <atl:Module location="1:1-95:2" name="ATL2Tracer" isRefining="true">
    <inModels location="2:27-2:35" name="IN" metamodel="/1"/>
    <outModels location="2:8-2:17" name="OUT" metamodel="/1"/>
    <elements xsi:type="atl:MatchedRule" location="4:1-27:2" name="Module">
      <outPattern location="7:2-26:4">
        <elements xsi:type="atl:SimpleOutPatternElement" location="8:3-19:4" varName="t">
          <type xsi:type="ocl:OclModelElement" location="8:7-8:17" name="Module" model="/1"/>
          <bindings location="9:4-9:18" propertyName="name">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="9:12-9:18" name="name">
              <source xsi:type="ocl:VariableExp" location="9:12-9:13" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="10:4-10:28" propertyName="libraries">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="10:17-10:28" name="libraries">
              <source xsi:type="ocl:VariableExp" location="10:17-10:18" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="11:4-11:30" propertyName="isRefining">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="11:18-11:30" name="isRefining">
              <source xsi:type="ocl:VariableExp" location="11:18-11:19" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="12:4-12:26" propertyName="inModels">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="12:16-12:26" name="inModels">
              <source xsi:type="ocl:VariableExp" location="12:16-12:17" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="13:4-13:51" propertyName="outModels">
            <value xsi:type="ocl:CollectionOperationCallExp" location="13:17-13:51" operationName="including">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="13:17-13:28" name="outModels">
                <source xsi:type="ocl:VariableExp" location="13:17-13:18" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
              </source>
              <arguments xsi:type="ocl:VariableExp" location="13:40-13:50" referredVariable="/0/@elements.0/@outPattern/@elements.1"/>
            </value>
          </bindings>
          <bindings location="14:4-14:26" propertyName="elements">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="14:16-14:26" name="elements">
              <source xsi:type="ocl:VariableExp" location="14:16-14:17" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="16:4-16:26" propertyName="location">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="16:16-16:26" name="location">
              <source xsi:type="ocl:VariableExp" location="16:16-16:17" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="17:4-17:38" propertyName="commentsBefore">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="17:22-17:38" name="commentsBefore">
              <source xsi:type="ocl:VariableExp" location="17:22-17:23" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="18:4-18:36" propertyName="commentsAfter">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="18:21-18:36" name="commentsAfter">
              <source xsi:type="ocl:VariableExp" location="18:21-18:22" referredVariable="/0/@elements.0/@inPattern/@elements.0"/>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="20:3-23:4" varName="traceModel" variableExp="/0/@elements.0/@outPattern/@elements.0/@bindings.4/@value/@arguments.0">
          <type xsi:type="ocl:OclModelElement" location="20:16-20:28" name="OclModel" model="/1"/>
          <bindings location="21:4-21:19" propertyName="name">
            <value xsi:type="ocl:StringExp" location="21:12-21:19" stringSymbol="trace"/>
          </bindings>
          <bindings location="22:4-22:31" propertyName="metamodel">
            <value xsi:type="ocl:VariableExp" location="22:17-22:31" referredVariable="/0/@elements.0/@outPattern/@elements.2"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="24:3-26:4" varName="traceMetamodel" variableExp="/0/@elements.0/@outPattern/@elements.1/@bindings.1/@value">
          <type xsi:type="ocl:OclModelElement" location="24:20-24:32" name="OclModel" model="/1"/>
          <bindings location="25:4-25:19" propertyName="name">
            <value xsi:type="ocl:StringExp" location="25:12-25:19" stringSymbol="Trace"/>
          </bindings>
        </elements>
      </outPattern>
      <inPattern location="5:2-6:17">
        <elements xsi:type="atl:SimpleInPatternElement" location="6:3-6:17" varName="s" variableExp="/0/@elements.0/@outPattern/@elements.0/@bindings.0/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.1/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.2/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.3/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.4/@value/@source/@source /0/@elements.0/@outPattern/@elements.0/@bindings.5/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.6/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.7/@value/@source /0/@elements.0/@outPattern/@elements.0/@bindings.8/@value/@source">
          <type xsi:type="ocl:OclModelElement" location="6:7-6:17" name="Module" model="/1"/>
        </elements>
      </inPattern>
    </elements>
    <elements xsi:type="atl:MatchedRule" location="29:1-95:2" name="OutPattern">
      <outPattern location="32:2-94:4">
        <elements xsi:type="atl:SimpleOutPatternElement" location="33:3-35:4" varName="t">
          <type xsi:type="ocl:OclModelElement" location="33:7-33:21" name="OutPattern" model="/1"/>
          <bindings location="34:4-34:48" propertyName="elements">
            <value xsi:type="ocl:CollectionOperationCallExp" location="34:16-34:48" operationName="including">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="34:16-34:26" name="elements">
                <source xsi:type="ocl:VariableExp" location="34:16-34:17" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
              </source>
              <arguments xsi:type="ocl:VariableExp" location="34:38-34:47" referredVariable="/0/@elements.1/@outPattern/@elements.1"/>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="38:3-42:4" varName="traceLink" variableExp="/0/@elements.1/@outPattern/@elements.0/@bindings.0/@value/@arguments.0 /0/@elements.1/@outPattern/@elements.10/@bindings.0/@value">
          <commentsBefore>-- We add a target pattern element creating a trace link to the rule.</commentsBefore>
          <type xsi:type="ocl:OclModelElement" location="38:15-38:42" name="SimpleOutPatternElement" model="/1"/>
          <bindings location="39:4-39:26" propertyName="varName">
            <value xsi:type="ocl:StringExp" location="39:15-39:26" stringSymbol="traceLink"/>
          </bindings>
          <bindings location="40:4-40:21" propertyName="type">
            <value xsi:type="ocl:VariableExp" location="40:12-40:21" referredVariable="/0/@elements.1/@outPattern/@elements.2"/>
          </bindings>
          <bindings location="41:4-41:51" propertyName="bindings">
            <value xsi:type="ocl:SequenceExp" location="41:16-41:51">
              <elements xsi:type="ocl:VariableExp" location="41:26-41:34" referredVariable="/0/@elements.1/@outPattern/@elements.3"/>
              <elements xsi:type="ocl:VariableExp" location="41:36-41:50" referredVariable="/0/@elements.1/@outPattern/@elements.12"/>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="43:3-46:4" varName="traceType" variableExp="/0/@elements.1/@outPattern/@elements.1/@bindings.1/@value">
          <type xsi:type="ocl:OclModelElement" location="43:15-43:34" name="OclModelElement" model="/1"/>
          <bindings location="44:4-44:23" propertyName="name">
            <value xsi:type="ocl:StringExp" location="44:12-44:23" stringSymbol="TraceLink"/>
          </bindings>
          <bindings location="45:4-45:72" propertyName="model">
            <value xsi:type="ocl:OperationCallExp" location="45:13-45:72" operationName="resolveTemp">
              <source xsi:type="ocl:VariableExp" location="45:13-45:23" referredVariable="/2"/>
              <arguments xsi:type="ocl:NavigationOrAttributeCallExp" location="45:36-45:53" name="module">
                <source xsi:type="ocl:NavigationOrAttributeCallExp" location="45:36-45:44" name="rule">
                  <source xsi:type="ocl:VariableExp" location="45:36-45:37" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
                </source>
              </arguments>
              <arguments xsi:type="ocl:StringExp" location="45:55-45:71" stringSymbol="traceMetamodel"/>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="49:3-52:4" varName="ruleName" variableExp="/0/@elements.1/@outPattern/@elements.1/@bindings.2/@value/@elements.0">
          <commentsBefore>-- The rule name is set using a binding.</commentsBefore>
          <type xsi:type="ocl:OclModelElement" location="49:14-49:25" name="Binding" model="/1"/>
          <bindings location="50:4-50:30" propertyName="propertyName">
            <value xsi:type="ocl:StringExp" location="50:20-50:30" stringSymbol="ruleName"/>
          </bindings>
          <bindings location="51:4-51:23" propertyName="value">
            <value xsi:type="ocl:VariableExp" location="51:13-51:23" referredVariable="/0/@elements.1/@outPattern/@elements.4"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="53:3-55:4" varName="nameString" variableExp="/0/@elements.1/@outPattern/@elements.3/@bindings.1/@value">
          <type xsi:type="ocl:OclModelElement" location="53:16-53:29" name="StringExp" model="/1"/>
          <bindings location="54:4-54:33" propertyName="stringSymbol">
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="54:20-54:33" name="name">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="54:20-54:28" name="rule">
                <source xsi:type="ocl:VariableExp" location="54:20-54:21" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
              </source>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="59:3-61:4" varName="sourceSeq" variableExp="/0/@elements.1/@outPattern/@elements.9/@bindings.2/@value/@elements.1">
          <commentsBefore>-- Source elements cannot be set with a binding because they are not supposed to be referrable.</commentsBefore>
          <commentsBefore>-- An imperative block is used instead.</commentsBefore>
          <type xsi:type="ocl:OclModelElement" location="59:15-59:30" name="SequenceExp" model="/1"/>
          <bindings location="60:4-60:26" propertyName="elements">
            <value xsi:type="ocl:VariableExp" location="60:16-60:26" referredVariable="/0/@elements.1/@outPattern/@elements.6"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:ForEachOutPatternElement" location="62:3-64:4" varName="sourceVars" variableExp="/0/@elements.1/@outPattern/@elements.5/@bindings.0/@value">
          <type xsi:type="ocl:OclModelElement" location="62:25-62:40" name="VariableExp" model="/1"/>
          <bindings location="63:4-63:25" propertyName="referredVariable">
            <value xsi:type="ocl:VariableExp" location="63:24-63:25" referredVariable="/0/@elements.1/@outPattern/@elements.6/@iterator"/>
          </bindings>
          <collection xsi:type="ocl:NavigationOrAttributeCallExp" location="62:54-62:81" name="elements">
            <source xsi:type="ocl:NavigationOrAttributeCallExp" location="62:54-62:72" name="inPattern">
              <source xsi:type="ocl:NavigationOrAttributeCallExp" location="62:54-62:62" name="rule">
                <source xsi:type="ocl:VariableExp" location="62:54-62:55" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
              </source>
            </source>
          </collection>
          <iterator location="62:49-62:50" varName="e" variableExp="/0/@elements.1/@outPattern/@elements.6/@bindings.0/@value"/>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="65:3-68:4" varName="actionBlock">
          <type xsi:type="ocl:OclModelElement" location="65:17-65:32" name="ActionBlock" model="/1"/>
          <bindings location="66:4-66:22" propertyName="rule">
            <commentsBefore>-- we suppose there is no action block in the original program</commentsBefore>
            <value xsi:type="ocl:NavigationOrAttributeCallExp" location="66:14-66:22" name="rule">
              <source xsi:type="ocl:VariableExp" location="66:14-66:15" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
            </value>
          </bindings>
          <bindings location="67:4-67:33" propertyName="statements">
            <value xsi:type="ocl:SequenceExp" location="67:18-67:33">
              <elements xsi:type="ocl:VariableExp" location="67:28-67:32" referredVariable="/0/@elements.1/@outPattern/@elements.8"/>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="69:3-71:4" varName="stat" variableExp="/0/@elements.1/@outPattern/@elements.7/@bindings.1/@value/@elements.0">
          <type xsi:type="ocl:OclModelElement" location="69:10-69:28" name="ExpressionStat" model="/1"/>
          <bindings location="70:4-70:29" propertyName="expression">
            <value xsi:type="ocl:VariableExp" location="70:18-70:29" referredVariable="/0/@elements.1/@outPattern/@elements.9"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="72:3-76:4" varName="refSetValue" variableExp="/0/@elements.1/@outPattern/@elements.8/@bindings.0/@value">
          <type xsi:type="ocl:OclModelElement" location="72:17-72:37" name="OperationCallExp" model="/1"/>
          <bindings location="73:4-73:34" propertyName="operationName">
            <value xsi:type="ocl:StringExp" location="73:21-73:34" stringSymbol="refSetValue"/>
          </bindings>
          <bindings location="74:4-74:26" propertyName="source">
            <value xsi:type="ocl:VariableExp" location="74:14-74:26" referredVariable="/0/@elements.1/@outPattern/@elements.10"/>
          </bindings>
          <bindings location="75:4-75:47" propertyName="arguments">
            <value xsi:type="ocl:SequenceExp" location="75:17-75:47">
              <elements xsi:type="ocl:VariableExp" location="75:27-75:35" referredVariable="/0/@elements.1/@outPattern/@elements.11"/>
              <elements xsi:type="ocl:VariableExp" location="75:37-75:46" referredVariable="/0/@elements.1/@outPattern/@elements.5"/>
            </value>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="77:3-79:4" varName="traceLinkVar" variableExp="/0/@elements.1/@outPattern/@elements.9/@bindings.1/@value">
          <type xsi:type="ocl:OclModelElement" location="77:18-77:33" name="VariableExp" model="/1"/>
          <bindings location="78:4-78:33" propertyName="referredVariable">
            <value xsi:type="ocl:VariableExp" location="78:24-78:33" referredVariable="/0/@elements.1/@outPattern/@elements.1"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="80:3-82:4" varName="seString" variableExp="/0/@elements.1/@outPattern/@elements.9/@bindings.2/@value/@elements.0">
          <type xsi:type="ocl:OclModelElement" location="80:14-80:27" name="StringExp" model="/1"/>
          <bindings location="81:4-81:36" propertyName="stringSymbol">
            <value xsi:type="ocl:StringExp" location="81:20-81:36" stringSymbol="sourceElements"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="85:3-88:4" varName="targetElements" variableExp="/0/@elements.1/@outPattern/@elements.1/@bindings.2/@value/@elements.1">
          <commentsBefore>-- Target elements are initialized using a binding</commentsBefore>
          <type xsi:type="ocl:OclModelElement" location="85:20-85:31" name="Binding" model="/1"/>
          <bindings location="86:4-86:36" propertyName="propertyName">
            <value xsi:type="ocl:StringExp" location="86:20-86:36" stringSymbol="targetElements"/>
          </bindings>
          <bindings location="87:4-87:22" propertyName="value">
            <value xsi:type="ocl:VariableExp" location="87:13-87:22" referredVariable="/0/@elements.1/@outPattern/@elements.13"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:SimpleOutPatternElement" location="89:3-91:4" varName="targetSeq" variableExp="/0/@elements.1/@outPattern/@elements.12/@bindings.1/@value">
          <type xsi:type="ocl:OclModelElement" location="89:15-89:30" name="SequenceExp" model="/1"/>
          <bindings location="90:4-90:26" propertyName="elements">
            <value xsi:type="ocl:VariableExp" location="90:16-90:26" referredVariable="/0/@elements.1/@outPattern/@elements.14"/>
          </bindings>
        </elements>
        <elements xsi:type="atl:ForEachOutPatternElement" location="92:3-94:4" varName="targetVars" variableExp="/0/@elements.1/@outPattern/@elements.13/@bindings.0/@value">
          <type xsi:type="ocl:OclModelElement" location="92:25-92:40" name="VariableExp" model="/1"/>
          <bindings location="93:4-93:25" propertyName="referredVariable">
            <value xsi:type="ocl:VariableExp" location="93:24-93:25" referredVariable="/0/@elements.1/@outPattern/@elements.14/@iterator"/>
          </bindings>
          <collection xsi:type="ocl:NavigationOrAttributeCallExp" location="92:54-92:64" name="elements">
            <source xsi:type="ocl:VariableExp" location="92:54-92:55" referredVariable="/0/@elements.1/@inPattern/@elements.0"/>
          </collection>
          <iterator location="92:49-92:50" varName="e" variableExp="/0/@elements.1/@outPattern/@elements.14/@bindings.0/@value"/>
        </elements>
      </outPattern>
      <inPattern location="30:2-31:21">
        <elements xsi:type="atl:SimpleInPatternElement" location="31:3-31:21" varName="s" variableExp="/0/@elements.1/@outPattern/@elements.0/@bindings.0/@value/@source/@source /0/@elements.1/@outPattern/@elements.2/@bindings.1/@value/@arguments.0/@source/@source /0/@elements.1/@outPattern/@elements.4/@bindings.0/@value/@source/@source /0/@elements.1/@outPattern/@elements.6/@collection/@source/@source/@source /0/@elements.1/@outPattern/@elements.7/@bindings.0/@value/@source /0/@elements.1/@outPattern/@elements.14/@collection/@source">
          <type xsi:type="ocl:OclModelElement" location="31:7-31:21" name="OutPattern" model="/1"/>
        </elements>
      </inPattern>
    </elements>
  </atl:Module>
  <ocl:OclModel location="2:14-2:17" name="ATL" elements="/0/@elements.0/@inPattern/@elements.0/@type /0/@elements.0/@outPattern/@elements.0/@type /0/@elements.0/@outPattern/@elements.1/@type /0/@elements.0/@outPattern/@elements.2/@type /0/@elements.1/@inPattern/@elements.0/@type /0/@elements.1/@outPattern/@elements.0/@type /0/@elements.1/@outPattern/@elements.1/@type /0/@elements.1/@outPattern/@elements.2/@type /0/@elements.1/@outPattern/@elements.3/@type /0/@elements.1/@outPattern/@elements.4/@type /0/@elements.1/@outPattern/@elements.5/@type /0/@elements.1/@outPattern/@elements.6/@type /0/@elements.1/@outPattern/@elements.7/@type /0/@elements.1/@outPattern/@elements.8/@type /0/@elements.1/@outPattern/@elements.9/@type /0/@elements.1/@outPattern/@elements.10/@type /0/@elements.1/@outPattern/@elements.11/@type /0/@elements.1/@outPattern/@elements.12/@type /0/@elements.1/@outPattern/@elements.13/@type /0/@elements.1/@outPattern/@elements.14/@type" model="/0/@outModels.0 /0/@inModels.0"/>
  <ocl:VariableDeclaration location="45:13-45:23" varName="thisModule" variableExp="/0/@elements.1/@outPattern/@elements.2/@bindings.1/@value/@source"/>
</xmi:XMI>
